<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Books Reader</title>
    <meta name="theme-color" content="#8B7355">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö IT Books Reader</h1>
            <div class="controls">
                <input type="file" id="file-input" accept=".txt,.pdf" style="display: none;">
                <button id="load-btn">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥—É</button>
                <button id="theme-btn">üåô –¢–µ–º–∞</button>
                <button id="fullscreen-btn">üì∫ –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</button>
                <button id="bookmark-btn" style="display: none;">üìç –ó–∞–∫–ª–∞–¥–∫–∞</button>
                <button id="search-btn" style="display: none;">üîç –ü–æ–∏—Å–∫</button>
                
                <div class="font-controls">
                    <button id="decrease-font-btn" title="–£–º–µ–Ω—å—à–∏—Ç—å —à—Ä–∏—Ñ—Ç (–°—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑)">A-</button>
                    <span id="font-size">16px</span>
                    <button id="increase-font-btn" title="–£–≤–µ–ª–∏—á–∏—Ç—å —à—Ä–∏—Ñ—Ç (–°—Ç—Ä–µ–ª–∫–∞ –≤–≤–µ—Ä—Ö)">A+</button>
                </div>
                
                <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ PDF -->
                <div id="pdf-nav" style="display: none;" class="pdf-nav">
                    <button id="prev-page-btn" title="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–°—Ç—Ä–µ–ª–∫–∞ –≤–ª–µ–≤–æ)">‚Üê</button>
                    <span id="page-info">–°—Ç—Ä. 1/1</span>
                    <button id="next-page-btn" title="–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–°—Ç—Ä–µ–ª–∫–∞ –≤–ø—Ä–∞–≤–æ)">‚Üí</button>
                </div>
                
                <!-- –ü–æ–∏—Å–∫ (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                <div id="search-container" style="display: none;" class="search-container">
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É...">
                    <button id="search-prev-btn">‚Üë</button>
                    <button id="search-next-btn">‚Üì</button>
                    <span id="search-results"></span>
                    <button id="search-close-btn">‚úï</button>
                </div>
            </div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –∫–Ω–∏–≥–µ -->
            <div id="book-info" class="book-info" style="display: none;">
                <div>
                    <span id="book-title"></span>
                    <div id="book-stats" style="font-size: 0.9em; color: #666; margin-top: 5px;"></div>
                </div>
                <div class="book-actions">
                    <button id="save-btn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ–±–ª–∞–∫–æ">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="export-btn" title="–≠–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
                </div>
            </div>
        </header>

        <main>
            <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω -->
            <div id="welcome-screen" class="welcome-screen">
                <div class="welcome-content">
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ IT Books Reader!</h2>
                    <p>–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á—Ç–µ–Ω–∏—è IT-–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã</p>
                    
                    <div class="features">
                        <div class="feature">
                            <span>üìñ</span>
                            <h3>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤</h3>
                            <p>–ß–∏—Ç–∞–π—Ç–µ –∫–Ω–∏–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö TXT –∏ PDF</p>
                        </div>
                        <div class="feature">
                            <span>‚å®Ô∏è</span>
                            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π</h3>
                            <p>‚Üê ‚Üí –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, ‚Üë ‚Üì –¥–ª—è —à—Ä–∏—Ñ—Ç–∞</p>
                        </div>
                        <div class="feature">
                            <span>üì∫</span>
                            <h3>–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</h3>
                            <p>–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ —á—Ç–µ–Ω–∏–µ –±–µ–∑ –æ—Ç–≤–ª–µ–∫–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</p>
                        </div>
                        <div class="feature">
                            <span>‚òÅÔ∏è</span>
                            <h3>–û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ</h3>
                            <p>–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∫–Ω–∏–≥–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</p>
                        </div>
                    </div>
                    
                    <div class="keyboard-hint">
                        <h3>–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:</h3>
                        <div class="keys">
                            <div class="key-group">
                                <kbd>‚Üê</kbd> <kbd>‚Üí</kbd>
                                <span>–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º</span>
                            </div>
                            <div class="key-group">
                                <kbd>‚Üë</kbd> <kbd>‚Üì</kbd>
                                <span>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</span>
                            </div>
                            <div class="key-group">
                                <kbd>F</kbd>
                                <span>–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</span>
                            </div>
                            <div class="key-group">
                                <kbd>ESC</kbd>
                                <span>–í—ã—Ö–æ–¥ –∏–∑ –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞</span>
                            </div>
                            <div class="key-group">
                                <kbd>Ctrl+F</kbd>
                                <span>–ü–æ–∏—Å–∫</span>
                            </div>
                        </div>
                    </div>
                    
                    <button id="start-btn" class="big-btn">
                        üìÅ –ù–∞—á–∞—Ç—å —á—Ç–µ–Ω–∏–µ - –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
                    </button>
                    <p class="formats">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: .txt, .pdf (–¥–æ 50MB)</p>
                    
                    <!-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –∫–Ω–∏–≥—É -->
                    <div id="restore-session" class="restore-session" style="display: none;">
                        <h3>‚Ü©Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ</h3>
                        <div id="last-book-info"></div>
                        <button id="restore-btn" class="restore-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                    </div>
                    
                    <!-- –û–±–ª–∞—á–Ω—ã–µ –∫–Ω–∏–≥–∏ -->
                    <div id="cloud-books" class="cloud-books" style="display: none;">
                        <h3>üìö –í–∞—à–∏ –æ–±–ª–∞—á–Ω—ã–µ –∫–Ω–∏–≥–∏</h3>
                        <div id="cloud-list" class="cloud-list"></div>
                    </div>
                    
                    <!-- –ó–∞–∫–ª–∞–¥–∫–∏ -->
                    <div id="bookmarks-section" class="bookmarks-section" style="display: none;">
                        <h3>üìç –í–∞—à–∏ –∑–∞–∫–ª–∞–¥–∫–∏</h3>
                        <div id="bookmarks-list" class="bookmarks-list"></div>
                    </div>
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∫–Ω–∏–≥–∏ -->
            <div id="book-content" class="book-content" style="display: none;"></div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è PDF -->
            <div id="pdf-viewer" style="display: none;"></div>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ -->
            <div id="progress-container" class="progress-container" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="progress-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
            
            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
            <div id="fullscreen-hint" class="fullscreen-hint" style="display: none;">
                –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Ä¢ –ù–∞–∂–º–∏—Ç–µ ESC –¥–ª—è –≤—ã—Ö–æ–¥–∞
            </div>
        </main>
        
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="notification" class="notification"></div>
        
        <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div id="mobile-nav" class="mobile-nav" style="display: none;">
            <button id="mobile-prev-btn" class="mobile-nav-btn left">‚Üê</button>
            <button id="mobile-next-btn" class="mobile-nav-btn right">‚Üí</button>
        </div>
        
        <!-- –î–∏–∞–ª–æ–≥ –∑–∞–∫–ª–∞–¥–æ–∫ -->
        <div id="bookmark-dialog" class="bookmark-dialog" style="display: none;">
            <div class="bookmark-content">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–ª–∞–¥–∫—É</h3>
                <input type="text" id="bookmark-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–∫–ª–∞–¥–∫–∏" value="–°—Ç—Ä–∞–Ω–∏—Ü–∞ ">
                <div class="bookmark-actions">
                    <button id="bookmark-save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="bookmark-cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    })
                    .catch(error => {
                        console.log('ServiceWorker –æ—à–∏–±–∫–∞:', error);
                    });
            });
        }
    </script>
</body>
</html>
